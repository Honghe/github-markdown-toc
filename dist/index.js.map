{"version":3,"file":"index.js","sources":["../node_modules/svelte/shared.js","../src/app.html","../node_modules/tiny-emitter/index.js","../node_modules/isobject/index.js","../node_modules/is-plain-object/index.js","../src/deep-assign.js","../src/flux.js","../src/check-js-enabled.js","../src/check-page-type.js","../src/get-header-data.js","../src/action.js","../src/store.js","../src/index.js"],"sourcesContent":["function appendNode ( node, target ) {\n\ttarget.appendChild( node );\n}\n\nfunction insertNode ( node, target, anchor ) {\n\ttarget.insertBefore( node, anchor );\n}\n\nfunction detachNode ( node ) {\n\tnode.parentNode.removeChild( node );\n}\n\nfunction detachBetween ( before, after ) {\n\twhile ( before.nextSibling && before.nextSibling !== after ) {\n\t\tbefore.parentNode.removeChild( before.nextSibling );\n\t}\n}\n\nfunction teardownEach ( iterations, detach, start ) {\n\tfor ( var i = ( start || 0 ); i < iterations.length; i += 1 ) {\n\t\titerations[i].teardown( detach );\n\t}\n}\n\nfunction createElement ( name ) {\n\treturn document.createElement( name );\n}\n\nfunction createSvgElement ( name ) {\n\treturn document.createElementNS( 'http://www.w3.org/2000/svg', name );\n}\n\nfunction createText ( data ) {\n\treturn document.createTextNode( data );\n}\n\nfunction createComment () {\n\treturn document.createComment( '' );\n}\n\nfunction addEventListener ( node, event, handler ) {\n\tnode.addEventListener ( event, handler, false );\n}\n\nfunction removeEventListener ( node, event, handler ) {\n\tnode.removeEventListener ( event, handler, false );\n}\n\nfunction setAttribute ( node, attribute, value ) {\n\tnode.setAttribute ( attribute, value );\n}\n\nfunction setXlinkAttribute ( node, attribute, value ) {\n\tnode.setAttributeNS( 'http://www.w3.org/1999/xlink', attribute, value );\n}\n\nfunction getBindingGroupValue ( group ) {\n\tvar value = [];\n\tfor ( var i = 0; i < group.length; i += 1 ) {\n\t\tif ( group[i].checked ) value.push( group[i].__value );\n\t}\n\treturn value;\n}\n\nfunction get ( key ) {\n\treturn key ? this._state[ key ] : this._state;\n}\n\nfunction fire ( eventName, data ) {\n\tvar handlers = eventName in this._handlers && this._handlers[ eventName ].slice();\n\tif ( !handlers ) return;\n\n\tfor ( var i = 0; i < handlers.length; i += 1 ) {\n\t\thandlers[i].call( this, data );\n\t}\n}\n\nfunction observe ( key, callback, options ) {\n\tvar group = ( options && options.defer ) ? this._observers.pre : this._observers.post;\n\n\t( group[ key ] || ( group[ key ] = [] ) ).push( callback );\n\n\tif ( !options || options.init !== false ) {\n\t\tcallback.__calling = true;\n\t\tcallback.call( this, this._state[ key ] );\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function () {\n\t\t\tvar index = group[ key ].indexOf( callback );\n\t\t\tif ( ~index ) group[ key ].splice( index, 1 );\n\t\t}\n\t};\n}\n\nfunction observeDev ( key, callback, options ) {\n\tvar c = ( key = '' + key ).search( /[^\\w]/ );\n\tif ( c > -1 ) {\n\t\tvar message = \"The first argument to component.observe(...) must be the name of a top-level property\";\n\t\tif ( c > 0 ) message += \", i.e. '\" + key.slice( 0, c ) + \"' rather than '\" + key + \"'\";\n\n\t\tthrow new Error( message );\n\t}\n\n\tvar group = ( options && options.defer ) ? this._observers.pre : this._observers.post;\n\n\t( group[ key ] || ( group[ key ] = [] ) ).push( callback );\n\n\tif ( !options || options.init !== false ) {\n\t\tcallback.__calling = true;\n\t\tcallback.call( this, this._state[ key ] );\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function () {\n\t\t\tvar index = group[ key ].indexOf( callback );\n\t\t\tif ( ~index ) group[ key ].splice( index, 1 );\n\t\t}\n\t};\n}\n\nfunction on ( eventName, handler ) {\n\tif ( eventName === 'teardown' ) return this.on( 'destroy', handler );\n\n\tvar handlers = this._handlers[ eventName ] || ( this._handlers[ eventName ] = [] );\n\thandlers.push( handler );\n\n\treturn {\n\t\tcancel: function () {\n\t\t\tvar index = handlers.indexOf( handler );\n\t\t\tif ( ~index ) handlers.splice( index, 1 );\n\t\t}\n\t};\n}\n\nfunction onDev ( eventName, handler ) {\n\tif ( eventName === 'teardown' ) {\n\t\tconsole.warn( \"Use component.on('destroy', ...) instead of component.on('teardown', ...) which has been deprecated and will be unsupported in Svelte 2\" );\n\t\treturn this.on( 'destroy', handler );\n\t}\n\n\tvar handlers = this._handlers[ eventName ] || ( this._handlers[ eventName ] = [] );\n\thandlers.push( handler );\n\n\treturn {\n\t\tcancel: function () {\n\t\t\tvar index = handlers.indexOf( handler );\n\t\t\tif ( ~index ) handlers.splice( index, 1 );\n\t\t}\n\t};\n}\n\nfunction set ( newState ) {\n\tthis._set( newState );\n\t( this._root || this )._flush();\n}\n\nfunction _flush () {\n\tif ( !this._renderHooks ) return;\n\n\twhile ( this._renderHooks.length ) {\n\t\tvar hook = this._renderHooks.pop();\n\t\thook.fn.call( hook.context );\n\t}\n}\n\nvar proto = {\n\tget: get,\n\tfire: fire,\n\tobserve: observe,\n\ton: on,\n\tset: set,\n\t_flush: _flush\n};\n\nvar protoDev = {\n\tget: get,\n\tfire: fire,\n\tobserve: observeDev,\n\ton: onDev,\n\tset: set,\n\t_flush: _flush\n};\n\nfunction noop () {}\n\nfunction dispatchObservers ( component, group, newState, oldState ) {\n\tfor ( var key in group ) {\n\t\tif ( !( key in newState ) ) continue;\n\n\t\tvar newValue = newState[ key ];\n\t\tvar oldValue = oldState[ key ];\n\n\t\tif ( newValue === oldValue && typeof newValue !== 'object' ) continue;\n\n\t\tvar callbacks = group[ key ];\n\t\tif ( !callbacks ) continue;\n\n\t\tfor ( var i = 0; i < callbacks.length; i += 1 ) {\n\t\t\tvar callback = callbacks[i];\n\t\t\tif ( callback.__calling ) continue;\n\n\t\t\tcallback.__calling = true;\n\t\t\tcallback.call( component, newValue, oldValue );\n\t\t\tcallback.__calling = false;\n\t\t}\n\t}\n}\n\nexport { noop, dispatchObservers, appendNode, insertNode, detachNode, detachBetween, teardownEach, createElement, createSvgElement, createText, createComment, addEventListener, removeEventListener, setAttribute, setXlinkAttribute, getBindingGroupValue, get, fire, observe, observeDev, on, onDev, set, _flush, proto, protoDev };\n","<div class=\"github-markdown-toc\" aria-disabled=\"{{ !isEnabled }}\" aria-busy=\"{{ isLoading }}\" data-open=\"{{ isOpen }}\">\n  <nav id=\"github-markdown-toc__nav-panel\" aria-hidden=\"{{ !isOpen }}\">\n    <ol>\n      {{#each headers as header}}\n      <li data-level=\"{{ header.level }}\"><a href=\"{{ header.link }}\">{{ header.text }}</a></li>\n      {{/each}}\n    </ol>\n  </nav>\n  <button type=\"button\" on:click=\"onBtnClicked()\" class=\"toggle-btn\" aria-controls=\"github-markdown-toc__nav-panel\" disabled=\"{{ !isEnabled }}\"></button>\n</div>\n<script>\n  export default {\n    methods: {\n      onBtnClicked () {\n        if (this.get('isEnabled')) {\n          this.fire('toggle-nav')\n        }\n      }\n    }\n  }\n</script>\n","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object'\n    && !Array.isArray(val);\n};\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n  \n  if (isObjectObject(o) === false) return false;\n  \n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n  \n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n  \n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n  \n  // Most likely a plain Object\n  return true;\n};\n","import isPlainObject from 'is-plain-object'\r\n\r\n/**\r\n * @param {Object} obj\r\n */\r\nfunction copyObject (obj) {\r\n  let copy = {}\r\n  Object.entries(obj).forEach(([k, v]) => {\r\n    if (isPlainObject(v)) {\r\n      copy[k] = copyObject(v)\r\n    }\r\n  })\r\n  return Object.assign({}, obj, copy)\r\n}\r\n\r\n/**\r\n * @param {*} target\r\n * @param {*[]} sources\r\n * @returns {Object}\r\n */\r\nexport default function deepAssign (target, ...sources) {\r\n  const copies = sources.map(source =>\r\n    isPlainObject(source) ? copyObject(source) : source\r\n  )\r\n  return Object.assign(target, ...copies)\r\n}\r\n","import EventEmitter from 'tiny-emitter'\r\nimport deepAssign from './deep-assign.js'\r\nconst ON_CHANGE = Symbol('on-change')\r\n\r\nexport class Action {\r\n  constructor (dispatcher) {\r\n    this._dispatcher = dispatcher\r\n  }\r\n  /**\r\n   * Emit a event with data\r\n   * @param {Symbol} key - event name\r\n   * @param {*} data\r\n   */\r\n  dispatch (key, data) {\r\n    this._dispatcher.emit(key, data)\r\n  }\r\n}\r\n\r\nexport class Store extends EventEmitter {\r\n  constructor (dispatcher) {\r\n    super()\r\n    this._state = {}\r\n    this._dispatcher = dispatcher\r\n  }\r\n  /**\r\n   * @param {Object} data\r\n   */\r\n  setState (data) {\r\n    this._state = deepAssign({}, this._state, data)\r\n    this.emit(ON_CHANGE)\r\n  }\r\n  /**\r\n   * @returns {Object}\r\n   */\r\n  getState () {\r\n    return deepAssign({}, this._state)\r\n  }\r\n  /**\r\n   * @param {Sybol} key\r\n   * @param {function} func\r\n   */\r\n  register (key, func) {\r\n    this._dispatcher.on(key, func)\r\n  }\r\n  /**\r\n   * @param {function} func\r\n   */\r\n  onChange (func) {\r\n    this.on(ON_CHANGE, func)\r\n  }\r\n}\r\n","/**\r\n * @returns {boolean}\r\n */\r\nexport default function checkJSEnebled () {\r\n  return new Promise(resolve => {\r\n    chrome.runtime.sendMessage({\r\n      type: 'is-js-enabled'\r\n    }, resolve)\r\n  })\r\n}\r\n","/**\r\n * @type {Object.<string, Symbol>}\r\n */\r\nexport const key = {\r\n  RELEASE: Symbol('release'),\r\n  CODE: Symbol('code'),\r\n  WIKI: Symbol('wiki'),\r\n  UNKNOWN: Symbol('unknown')\r\n}\r\n\r\n/**\r\n * @param {string} url\r\n * @returns {Symbol}\r\n */\r\nexport default function checkPageType (url) {\r\n  const { pathname: path } = new URL(url)\r\n  const [, user, project, ...pathes] = path.split('/')\r\n  if (pathes[0] === 'releases' && pathes.length === 1) {\r\n    return key.RELEASE\r\n  } else if (pathes[0] === 'blob' || pathes[0] === 'tree' || (user && project && !pathes.length)) {\r\n    return key.CODE\r\n  } else if (pathes[0] === 'wiki') {\r\n    return key.WIKI\r\n  }\r\n  return key.UNKNOWN\r\n}\r\n","import checkJSEnabled from './check-js-enabled.js'\nimport checkPageType, { key } from './check-page-type.js'\nconst headerSelector = 'h1, h2, h3, h4, h5, h6'\n\n/**\n * @returns {Array<HeaderObject>}\n */\nfunction fetchReleaseHeader () {\n  const hs = document.querySelectorAll('.release-title')\n  if (!hs) {\n    return []\n  }\n  return Array.from(hs).map(h => {\n    const { href: link } = h.querySelector('a')\n    const text = h.textContent.trim()\n    return {\n      link,\n      level: 1,\n      text\n    }\n  })\n}\n\n/**\n * @returns {Array<HeaderObject>}\n */\nasync function fetchMarkdownHeader () {\n  const readme = document.querySelector('.markdown-body')\n  if (!readme) {\n    return []\n  }\n  const hs = readme.querySelectorAll(headerSelector)\n  return await getHeaderDataFromMarkdownDOM(hs)\n}\n\n/**\n * @returns {Array<HeaderObject>}\n */\nasync function fetchWikiHeader () {\n  const markdown = document.querySelector('.wiki-body .markdown-body')\n  if (!markdown) {\n    return []\n  }\n  let hs = markdown.querySelectorAll(headerSelector)\n  hs = Array.from(hs).filter(h => {\n    return Boolean(h.textContent.trim())\n  })\n  return await getHeaderDataFromMarkdownDOM(hs)\n}\n\n/**\n * @typedef {Object} HeaderObject\n * @property {string} link\n * @property {number} level\n * @property {string} text\n */\n\n/**\n * @param {NodeList|Element[]} nodelist\n * @returns {Array<HeaderObject>}\n */\nasync function getHeaderDataFromMarkdownDOM (nodelist) {\n  const isJSEnabled = await checkJSEnabled()\n  const arr = Array.isArray(nodelist) ? nodelist : Array.from(nodelist)\n  return arr.map(h => {\n    let { id, href } = h.querySelector('.anchor')\n    id = `#${id}`\n    href = new URL(href).hash\n    const link = isJSEnabled ? href : id\n    const level = Number(h.tagName[1])\n    const text = h.textContent.trim()\n    /**\n     * @type {HeaderObject}\n     */\n    return {\n      link,\n      level,\n      text\n    }\n  })\n}\n\n/**\n * @returns {Array<HeaderObject>}\n */\nexport default async function fetchHeader () {\n  const type = checkPageType(location.href)\n  if (type === key.RELEASE) {\n    return fetchReleaseHeader()\n  } else if (type === key.CODE) {\n    return await fetchMarkdownHeader()\n  } else if (type === key.WIKI) {\n    return await fetchWikiHeader()\n  } else {\n    return []\n  }\n}\n","import { Action } from './flux.js'\nimport fetchHeader from './get-header-data.js'\n\nexport const key = {\n  START_LOADING: Symbol('start-loading'),\n  MOVE_TO_PAGE: Symbol('move-to-page'),\n  TOGGLE_NAV: Symbol('toggle-nav')\n}\n\nexport default class AppAction extends Action {\n  startLoading () {\n    this.dispatch(key.START_LOADING)\n  }\n  async moveToPage () {\n    const headers = await fetchHeader()\n    const isAvailable = Boolean(headers.length)\n    const data = {\n      headers,\n      isAvailable\n    }\n    this.dispatch(key.MOVE_TO_PAGE, data)\n  }\n  toggleNav () {\n    this.dispatch(key.TOGGLE_NAV)\n  }\n}\n","import { Store } from './flux.js'\nimport { key } from './action.js'\n\nexport default class AppStore extends Store {\n  constructor (dispatcher) {\n    super(dispatcher)\n    this.setState({\n      isLoading: false,\n      isOpen: false,\n      isEnabled: false,\n      headers: []\n    })\n    this.register(key.START_LOADING, this.loading.bind(this))\n    this.register(key.MOVE_TO_PAGE, this.toPage.bind(this))\n    this.register(key.TOGGLE_NAV, this.toggleNav.bind(this))\n  }\n  loading () {\n    this.setState({\n      isLoading: true\n    })\n  }\n  toPage ({ isAvailable, headers }) {\n    this.setState({\n      headers,\n      isLoading: false,\n      isEnabled: isAvailable,\n      isOpen: isAvailable ? this.state.isOpen : false\n    })\n  }\n  toggleNav () {\n    this.setState({\n      isOpen: !this.state.isOpen\n    })\n  }\n}\n","'use strict'\n\nimport App from './app.html'\nimport EventEmitter from 'tiny-emitter'\nimport AppAction from './action.js'\nimport AppStore from './store.js'\n\nconst dispatcher = new EventEmitter()\nconst action = new AppAction(dispatcher)\nconst store = new AppStore(dispatcher)\n\nconst dataAttr = 'githubMarkdownTocOpen'\nconst body = document.body\n\nconst rootElm = document.createElement('github-markdown-toc-container')\nconst app = new App({\n  data: store.getState(),\n  target: rootElm\n})\nbody.appendChild(rootElm)\nstore.onChange(() => {\n  app.set(store.getState())\n})\nstore.onChange(() => {\n  const { isOpen } = store.getState()\n  if (isOpen) {\n    body.dataset[dataAttr] = ''\n  } else {\n    delete body.dataset[dataAttr]\n  }\n})\napp.on('toggle-nav', action.toggleNav.bind(action))\nwindow.addEventListener('pjax:start', action.startLoading.bind(action))\nwindow.addEventListener('pjax:end', action.moveToPage.bind(action))\n// init\naction.moveToPage()\n"],"names":["target","appendChild","node","insertBefore","anchor","parentNode","removeChild","start","i","iterations","length","teardown","detach","createElement","name","createTextNode","data","createComment","addEventListener","event","handler","removeEventListener","setAttribute","attribute","value","_state","key","eventName","_handlers","slice","handlers","call","options","defer","_observers","pre","post","group","push","callback","init","__calling","cancel","indexOf","index","splice","on","_set","newState","_root","_flush","_renderHooks","pop","hook","fn","context","get","fire","observe","set","oldState","newValue","oldValue","callbacks","component","methods","onBtnClicked","isEnabled","isLoading","isOpen","headers","header","level","link","text","E","prototype","e","ctx","once","self","off","listener","apply","arguments","_","emit","evtArr","len","evts","liveEvents","Array","isArray","val","o","toString","constructor","ctor","prot","hasOwnProperty","entries","obj","forEach","isPlainObject","v","copy","k","copyObject","Object","assign","sources","map","source","copies","Symbol","_dispatcher","dispatcher","dispatch","setState","deepAssign","ON_CHANGE","getState","register","func","onChange","chrome","runtime","sendMessage","type","resolve","RELEASE","CODE","WIKI","UNKNOWN","pathname","url","path","split","user","project","pathes","document","querySelectorAll","from","hs","href","h","querySelector","textContent","trim","readme","headerSelector","markdown","filter","nodelist","id","hash","isJSEnabled","tagName","checkPageType","location","fetchReleaseHeader","START_LOADING","MOVE_TO_PAGE","TOGGLE_NAV","startLoading","isAvailable","toggleNav","loading","bind","toPage","state","action","store","dataAttr","body","rootElm","app","dataset","window","moveToPage"],"mappings":"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"}