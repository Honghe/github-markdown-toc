{"version":3,"file":"index.js","sources":["../node_modules/svelte/shared.js","../src/app.html","../node_modules/tiny-emitter/index.js","../node_modules/isobject/index.js","../node_modules/is-plain-object/index.js","../src/deep-asign.js","../src/flux.js","../src/action-type.js","../src/check-page-type.js","../src/check-js-enabled.js","../src/get-header-data.js","../src/action.js","../src/store.js","../src/index.js"],"sourcesContent":["function appendNode ( node, target ) {\n\ttarget.appendChild( node );\n}\n\nfunction insertNode ( node, target, anchor ) {\n\ttarget.insertBefore( node, anchor );\n}\n\nfunction detachNode ( node ) {\n\tnode.parentNode.removeChild( node );\n}\n\nfunction detachBetween ( before, after ) {\n\twhile ( before.nextSibling && before.nextSibling !== after ) {\n\t\tbefore.parentNode.removeChild( before.nextSibling );\n\t}\n}\n\nfunction teardownEach ( iterations, detach, start ) {\n\tfor ( var i = ( start || 0 ); i < iterations.length; i += 1 ) {\n\t\titerations[i].teardown( detach );\n\t}\n}\n\nfunction createElement ( name ) {\n\treturn document.createElement( name );\n}\n\nfunction createSvgElement ( name ) {\n\treturn document.createElementNS( 'http://www.w3.org/2000/svg', name );\n}\n\nfunction createText ( data ) {\n\treturn document.createTextNode( data );\n}\n\nfunction createComment () {\n\treturn document.createComment( '' );\n}\n\nfunction addEventListener ( node, event, handler ) {\n\tnode.addEventListener ( event, handler, false );\n}\n\nfunction removeEventListener ( node, event, handler ) {\n\tnode.removeEventListener ( event, handler, false );\n}\n\nfunction setAttribute ( node, attribute, value ) {\n\tnode.setAttribute ( attribute, value );\n}\n\nfunction setXlinkAttribute ( node, attribute, value ) {\n\tnode.setAttributeNS( 'http://www.w3.org/1999/xlink', attribute, value );\n}\n\nfunction get ( key ) {\n\treturn key ? this._state[ key ] : this._state;\n}\n\nfunction fire ( eventName, data ) {\n\tvar handlers = eventName in this._handlers && this._handlers[ eventName ].slice();\n\tif ( !handlers ) return;\n\n\tfor ( var i = 0; i < handlers.length; i += 1 ) {\n\t\thandlers[i].call( this, data );\n\t}\n}\n\nfunction observe ( key, callback, options ) {\n\tvar group = ( options && options.defer ) ? this._observers.pre : this._observers.post;\n\n\t( group[ key ] || ( group[ key ] = [] ) ).push( callback );\n\n\tif ( !options || options.init !== false ) {\n\t\tcallback.__calling = true;\n\t\tcallback.call( this, this._state[ key ] );\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function () {\n\t\t\tvar index = group[ key ].indexOf( callback );\n\t\t\tif ( ~index ) group[ key ].splice( index, 1 );\n\t\t}\n\t};\n}\n\nfunction on ( eventName, handler ) {\n\tvar handlers = this._handlers[ eventName ] || ( this._handlers[ eventName ] = [] );\n\thandlers.push( handler );\n\n\treturn {\n\t\tcancel: function () {\n\t\t\tvar index = handlers.indexOf( handler );\n\t\t\tif ( ~index ) handlers.splice( index, 1 );\n\t\t}\n\t};\n}\n\nfunction set ( newState ) {\n\tthis._set( newState );\n\t( this._root || this )._flush();\n}\n\nfunction _flush () {\n\tif ( !this._renderHooks ) return;\n\n\twhile ( this._renderHooks.length ) {\n\t\tvar hook = this._renderHooks.pop();\n\t\thook.fn.call( hook.context );\n\t}\n}\n\nfunction noop () {}\n\nfunction dispatchObservers ( component, group, newState, oldState ) {\n\tfor ( var key in group ) {\n\t\tif ( !( key in newState ) ) continue;\n\n\t\tvar newValue = newState[ key ];\n\t\tvar oldValue = oldState[ key ];\n\n\t\tif ( newValue === oldValue && typeof newValue !== 'object' ) continue;\n\n\t\tvar callbacks = group[ key ];\n\t\tif ( !callbacks ) continue;\n\n\t\tfor ( var i = 0; i < callbacks.length; i += 1 ) {\n\t\t\tvar callback = callbacks[i];\n\t\t\tif ( callback.__calling ) continue;\n\n\t\t\tcallback.__calling = true;\n\t\t\tcallback.call( component, newValue, oldValue );\n\t\t\tcallback.__calling = false;\n\t\t}\n\t}\n}\n\nexport { noop, dispatchObservers, appendNode, insertNode, detachNode, detachBetween, teardownEach, createElement, createSvgElement, createText, createComment, addEventListener, removeEventListener, setAttribute, setXlinkAttribute, get, fire, observe, on, set, _flush };\n","<div class=\"github-markdown-toc\" aria-disabled=\"{{ !isEnabled }}\" aria-busy=\"{{ isLoading }}\" data-open=\"{{ isOpen }}\">\n  <nav id=\"github-markdown-toc__nav-panel\" aria-hidden=\"{{ !isOpen }}\">\n    <ol>\n      {{#each headers as header}}\n        <li class=\"{{ header.tag }}\"><a href=\"{{ header.link }}\">{{ header.text }}</a></li>\n      {{/each}}\n    </ol>\n  </nav>\n  <button type=\"button\" on:click=\"onBtnClicked()\" class=\"toggle-btn\" aria-controls=\"github-markdown-toc__nav-panel\" disabled=\"{{ !isEnabled }}\"></button>\n</div>\n<script>\n  export default {\n    methods: {\n      onBtnClicked () {\n        if (this.get('isEnabled')) {\n          this.fire('toggle-nav')\n        }\n      }\n    }\n  }\n</script>\n","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object'\n    && !Array.isArray(val);\n};\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n  \n  if (isObjectObject(o) === false) return false;\n  \n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n  \n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n  \n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n  \n  // Most likely a plain Object\n  return true;\n};\n","import isPlainObject from 'is-plain-object'\r\n\r\nfunction copyObject (obj) {\r\n  let copy = {}\r\n  if (isPlainObject(obj)) {\r\n    Object.keys(obj).forEach(k => {\r\n      if (isPlainObject(obj[k])) {\r\n        copy[k] = copyObject(obj[k])\r\n      }\r\n    })\r\n  }\r\n  return Object.assign({}, obj, copy)\r\n}\r\n\r\nfunction deepAssign (target, ...sources) {\r\n  const copies = sources.map(source => copyObject(source))\r\n  return Object.assign(target, ...copies)\r\n}\r\n\r\nexport default deepAssign\r\n","import EventEmitter from 'tiny-emitter'\r\nimport deepAssign from './deep-asign.js'\r\nconst ON_CHANGE = Symbol('on-change')\r\n\r\nclass Action {\r\n  constructor (dispatcher) {\r\n    this.dispatcher = dispatcher\r\n  }\r\n  dispatch (key, data) {\r\n    this.dispatcher.emit(key, data)\r\n  }\r\n}\r\n\r\nclass Store extends EventEmitter {\r\n  constructor (dispatcher) {\r\n    super()\r\n    this.dispatcher = dispatcher\r\n  }\r\n  setState (data) {\r\n    this.state = deepAssign({}, this.state, data)\r\n    this.emit(ON_CHANGE)\r\n  }\r\n  getState () {\r\n    return deepAssign({}, this.state)\r\n  }\r\n  register (key, func) {\r\n    this.dispatcher.on(key, func)\r\n  }\r\n  onChange (func) {\r\n    this.on(ON_CHANGE, func)\r\n  }\r\n}\r\n\r\nexport {\r\n  Action,\r\n  Store\r\n}\r\n","export default {\r\n  START_LOADING: Symbol('start-loading'),\r\n  MOVE_TO_PAGE: Symbol('move-to-page'),\r\n  TOGGLE_NAV: Symbol('toggle-nav')\r\n}\r\n","const key = {\r\n  RELEASE: Symbol('release'),\r\n  CODE: Symbol('code'),\r\n  WIKI: Symbol('wiki'),\r\n  UNKNOWN: Symbol('unknown')\r\n}\r\n\r\nfunction checkPageType (url) {\r\n  const { pathname: path } = new URL(url)\r\n  const [, user, project, ...pathes] = path.split('/')\r\n  if (pathes[0] === 'releases' && pathes.length === 1) {\r\n    return key.RELEASE\r\n  } else if (pathes[0] === 'blob' || pathes[0] === 'tree' || (user && project && !pathes.length)) {\r\n    return key.CODE\r\n  } else if (pathes[0] === 'wiki') {\r\n    return key.WIKI\r\n  }\r\n  return key.UNKNOWN\r\n}\r\n\r\nexport { key, checkPageType }\r\n","function checkJSEnebled () {\r\n  return new Promise(resolve => {\r\n    chrome.runtime.sendMessage({\r\n      type: 'is-js-enabled'\r\n    }, resolve)\r\n  })\r\n}\r\n\r\nexport default checkJSEnebled\r\n","import checkJSEnabled from './check-js-enabled.js'\nconst headerSelector = 'h1, h2, h3, h4, h5, h6'\n\nfunction fetchReleaseHeader () {\n  const hs = document.querySelectorAll('.release-title')\n  if (!hs) {\n    return []\n  }\n  return Array.from(hs).map(h => {\n    const { href: link } = h.querySelector('a')\n    // all level is 1\n    const tag = 'lv1'\n    const text = h.textContent.trim()\n    return {\n      link,\n      tag,\n      text\n    }\n  })\n}\n\nasync function fetchMarkdownHeader () {\n  const readme = document.querySelector('.markdown-body')\n  if (!readme) {\n    return []\n  }\n  const hs = readme.querySelectorAll(headerSelector)\n  return await getHeaderDataFromMarkdownDOM(hs)\n}\n\nasync function fetchWikiHeader () {\n  const markdown = document.querySelector('.wiki-body .markdown-body')\n  if (!markdown) {\n    return []\n  }\n  let hs = markdown.querySelectorAll(headerSelector)\n  hs = Array.from(hs).filter(h => {\n    return Boolean(h.textContent.trim())\n  })\n  return await getHeaderDataFromMarkdownDOM(hs)\n}\n\nasync function getHeaderDataFromMarkdownDOM (nodelist) {\n  const isJSEnabled = await checkJSEnabled()\n  const arr = Array.isArray(nodelist) ? nodelist : Array.from(nodelist)\n  return arr.map(h => {\n    let { id, href } = h.querySelector('.anchor')\n    id = `#${id}`\n    href = new URL(href).hash\n    const link = isJSEnabled ? href : id\n    const tag = h.tagName.replace('H', 'lv')\n    const text = h.textContent.trim()\n    return {\n      link,\n      tag,\n      text\n    }\n  })\n}\n\nexport {\n  fetchReleaseHeader,\n  fetchMarkdownHeader,\n  fetchWikiHeader\n}\n","import { Action } from './flux.js'\nimport key from './action-type.js'\nimport { key as pageKey, checkPageType } from './check-page-type.js'\nimport {\n  fetchReleaseHeader,\n  fetchMarkdownHeader,\n  fetchWikiHeader\n} from './get-header-data.js'\n\nclass AppAction extends Action {\n  startLoading () {\n    this.dispatch(key.START_LOADING)\n  }\n  async moveToPage () {\n    let headers\n    const type = checkPageType(location.href)\n    if (type === pageKey.RELEASE) {\n      headers = fetchReleaseHeader()\n    } else if (type === pageKey.CODE) {\n      headers = await fetchMarkdownHeader()\n    } else if (type === pageKey.WIKI) {\n      headers = await fetchWikiHeader()\n    } else {\n      headers = []\n    }\n    const isAvailable = Boolean(headers.length)\n    const data = {\n      headers,\n      isAvailable\n    }\n    this.dispatch(key.MOVE_TO_PAGE, data)\n  }\n  toggleNav () {\n    this.dispatch(key.TOGGLE_NAV)\n  }\n}\n\nexport default AppAction\n","import { Store } from './flux.js'\nimport key from './action-type.js'\n\nclass AppStore extends Store {\n  constructor (dispatcher) {\n    super(dispatcher)\n    this.state = {\n      isLoading: false,\n      isOpen: false,\n      isEnabled: false,\n      headers: []\n    }\n    this.register(key.START_LOADING, this.loading.bind(this))\n    this.register(key.MOVE_TO_PAGE, this.toPage.bind(this))\n    this.register(key.TOGGLE_NAV, this.toggleNav.bind(this))\n  }\n  loading () {\n    this.setState({\n      isLoading: true\n    })\n  }\n  toPage ({ isAvailable, headers }) {\n    this.setState({\n      headers,\n      isLoading: false,\n      isEnabled: isAvailable,\n      isOpen: isAvailable ? this.state.isOpen : false\n    })\n  }\n  toggleNav () {\n    this.setState({\n      isOpen: !this.state.isOpen\n    })\n  }\n}\n\nexport default AppStore\n","'use strict'\r\n\r\nimport App from './app.html'\r\nimport EventEmitter from 'tiny-emitter'\r\nimport AppAction from './action.js'\r\nimport AppStore from './store.js'\r\n\r\nconst dispatcher = new EventEmitter()\r\nconst action = new AppAction(dispatcher)\r\nconst store = new AppStore(dispatcher)\r\nconst dataAttr = 'githubMarkdownTocOpen'\r\nconst body = document.body\r\n\r\nconst rootElm = document.createElement('github-markdown-toc-container')\r\nconst $app = new App({\r\n  data: store.getState(),\r\n  target: rootElm\r\n})\r\nbody.appendChild(rootElm)\r\nstore.onChange(() => {\r\n  $app.set(store.getState())\r\n})\r\nstore.onChange(() => {\r\n  const { isOpen } = store.getState()\r\n  if (isOpen) {\r\n    body.dataset[dataAttr] = ''\r\n  } else {\r\n    delete body.dataset[dataAttr]\r\n  }\r\n})\r\n$app.on('toggle-nav', action.toggleNav.bind(action))\r\nwindow.addEventListener('pjax:start', action.startLoading.bind(action))\r\nwindow.addEventListener('pjax:end', action.moveToPage.bind(action))\r\n// init\r\naction.moveToPage()\r\n"],"names":["target","appendChild","node","insertBefore","anchor","parentNode","removeChild","start","i","iterations","length","teardown","detach","createElement","name","createTextNode","data","createComment","addEventListener","event","handler","removeEventListener","setAttribute","attribute","value","_state","key","eventName","_handlers","slice","handlers","call","options","defer","_observers","pre","post","group","push","callback","init","__calling","cancel","indexOf","index","splice","_set","newState","_root","_flush","_renderHooks","pop","hook","fn","context","oldState","newValue","oldValue","callbacks","component","methods","onBtnClicked","get","fire","isEnabled","isLoading","isOpen","headers","header","text","E","prototype","on","e","ctx","once","self","off","listener","apply","arguments","_","emit","evtArr","len","evts","liveEvents","Array","isArray","val","o","toString","constructor","ctor","prot","hasOwnProperty","obj","Object","keys","forEach","isPlainObject","k","copy","copyObject","assign","sources","map","source","copies","Symbol","dispatcher","dispatch","setState","state","deepAssign","ON_CHANGE","getState","register","func","onChange","START_LOADING","MOVE_TO_PAGE","TOGGLE_NAV","RELEASE","CODE","WIKI","UNKNOWN","pathname","url","path","split","user","project","pathes","chrome","runtime","sendMessage","type","resolve","document","querySelectorAll","from","hs","href","h","querySelector","textContent","trim","link","tag","readme","headerSelector","markdown","filter","nodelist","id","hash","isJSEnabled","tagName","replace","startLoading","checkPageType","location","pageKey","fetchReleaseHeader","isAvailable","toggleNav","loading","bind","toPage","action","store","dataAttr","body","rootElm","$app","set","dataset","window","moveToPage"],"mappings":"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"}