{"version":3,"file":"index.js","sources":["../node_modules/svelte/shared.js","../src/app.html","../modules/event-emitter/index.js","../modules/is-plain-object/index.js","../modules/deep-assign/index.js","../modules/flux/index.js","../modules/functional-util/index.js","../src/functions.js","../src/page-type.js","../src/check-js-enabled.js","../src/page.js","../src/action.js","../src/store.js","../src/index.js"],"sourcesContent":["function noop () {}\n\nfunction assign ( target ) {\n\tfor ( var i = 1; i < arguments.length; i += 1 ) {\n\t\tvar source = arguments[i];\n\t\tfor ( var k in source ) target[k] = source[k];\n\t}\n\n\treturn target;\n}\n\nfunction appendNode ( node, target ) {\n\ttarget.appendChild( node );\n}\n\nfunction insertNode ( node, target, anchor ) {\n\ttarget.insertBefore( node, anchor );\n}\n\nfunction detachNode ( node ) {\n\tnode.parentNode.removeChild( node );\n}\n\nfunction detachBetween ( before, after ) {\n\twhile ( before.nextSibling && before.nextSibling !== after ) {\n\t\tbefore.parentNode.removeChild( before.nextSibling );\n\t}\n}\n\nfunction destroyEach ( iterations, detach, start ) {\n\tfor ( var i = start; i < iterations.length; i += 1 ) {\n\t\tif ( iterations[i] ) iterations[i].destroy( detach );\n\t}\n}\n\nfunction createElement ( name ) {\n\treturn document.createElement( name );\n}\n\nfunction createSvgElement ( name ) {\n\treturn document.createElementNS( 'http://www.w3.org/2000/svg', name );\n}\n\nfunction createText ( data ) {\n\treturn document.createTextNode( data );\n}\n\nfunction createComment () {\n\treturn document.createComment( '' );\n}\n\nfunction addEventListener ( node, event, handler ) {\n\tnode.addEventListener( event, handler, false );\n}\n\nfunction removeEventListener ( node, event, handler ) {\n\tnode.removeEventListener( event, handler, false );\n}\n\nfunction setAttribute ( node, attribute, value ) {\n\tnode.setAttribute( attribute, value );\n}\n\nfunction setXlinkAttribute ( node, attribute, value ) {\n\tnode.setAttributeNS( 'http://www.w3.org/1999/xlink', attribute, value );\n}\n\nfunction getBindingGroupValue ( group ) {\n\tvar value = [];\n\tfor ( var i = 0; i < group.length; i += 1 ) {\n\t\tif ( group[i].checked ) value.push( group[i].__value );\n\t}\n\treturn value;\n}\n\nfunction linear ( t ) {\n\treturn t;\n}\n\nfunction generateKeyframes ( a, b, delta, duration, ease, fn, node, style ) {\n\tvar id = '__svelte' + ~~( Math.random() * 1e9 ); // TODO make this more robust\n\tvar keyframes = '@keyframes ' + id + '{\\n';\n\n\tfor ( var p = 0; p <= 1; p += 16.666 / duration ) {\n\t\tvar t = a + delta * ease( p );\n\t\tkeyframes += ( p * 100 ) + '%{' + fn( t ) + '}\\n';\n\t}\n\n\tkeyframes += '100% {' + fn( b ) + '}\\n}';\n\tstyle.textContent += keyframes;\n\n\tdocument.head.appendChild( style );\n\n\tnode.style.animation = node.style.animation.split( ',' )\n\t\t.filter( function ( anim ) {\n\t\t\t// when introing, discard old animations if there are any\n\t\t\treturn anim && ( delta < 0 || !/__svelte/.test( anim ) );\n\t\t})\n\t\t.concat( id + ' ' + duration + 'ms linear 1 forwards' )\n\t\t.join( ', ' );\n}\n\nfunction wrapTransition ( node, fn, params, intro, outgroup ) {\n\tvar obj = fn( node, params );\n\tvar duration = obj.duration || 300;\n\tvar ease = obj.easing || linear;\n\n\t// TODO share <style> tag between all transitions?\n\tif ( obj.css ) {\n\t\tvar style = document.createElement( 'style' );\n\t}\n\n\tif ( intro && obj.tick ) obj.tick( 0 );\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\t\trun: function ( intro, callback ) {\n\t\t\tvar program = {\n\t\t\t\tstart: window.performance.now() + ( obj.delay || 0 ),\n\t\t\t\tintro: intro,\n\t\t\t\tcallback: callback\n\t\t\t};\n\n\t\t\tif ( obj.delay ) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start( program );\n\t\t\t}\n\n\t\t\tif ( !this.running ) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add( this );\n\t\t\t}\n\t\t},\n\t\tstart: function ( program ) {\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.b = program.intro ? 1 : 0;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs( program.b - program.a );\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif ( obj.css ) {\n\t\t\t\tgenerateKeyframes( program.a, program.b, program.delta, program.duration, ease, obj.css, node, style );\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\t\tupdate: function ( now ) {\n\t\t\tvar program = this.program;\n\t\t\tif ( !program ) return;\n\n\t\t\tvar p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease( p / program.duration );\n\t\t\tif ( obj.tick ) obj.tick( this.t );\n\t\t},\n\t\tdone: function () {\n\t\t\tthis.t = this.program.b;\n\t\t\tif ( obj.tick ) obj.tick( this.t );\n\t\t\tif ( obj.css ) document.head.removeChild( style );\n\t\t\tthis.program.callback();\n\t\t\tthis.program = null;\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\t\tabort: function () {\n\t\t\tif ( obj.tick ) obj.tick( 1 );\n\t\t\tif ( obj.css ) document.head.removeChild( style );\n\t\t\tthis.program = this.pending = null;\n\t\t\tthis.running = false;\n\t\t}\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\n\tadd: function ( transition ) {\n\t\ttransitionManager.transitions.push( transition );\n\n\t\tif ( !this.running ) {\n\t\t\tthis.running = true;\n\t\t\tthis.next();\n\t\t}\n\t},\n\n\tnext: function () {\n\t\ttransitionManager.running = false;\n\n\t\tvar now = window.performance.now();\n\t\tvar i = transitionManager.transitions.length;\n\n\t\twhile ( i-- ) {\n\t\t\tvar transition = transitionManager.transitions[i];\n\n\t\t\tif ( transition.program && now >= transition.program.end ) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif ( transition.pending && now >= transition.pending.start ) {\n\t\t\t\ttransition.start( transition.pending );\n\t\t\t}\n\n\t\t\tif ( transition.running ) {\n\t\t\t\ttransition.update( now );\n\t\t\t\ttransitionManager.running = true;\n\t\t\t} else if ( !transition.pending ) {\n\t\t\t\ttransitionManager.transitions.splice( i, 1 );\n\t\t\t}\n\t\t}\n\n\t\tif ( transitionManager.running ) {\n\t\t\trequestAnimationFrame( transitionManager.next );\n\t\t}\n\t}\n};\n\nfunction differs ( a, b ) {\n\treturn ( a !== b ) || ( a && ( typeof a === 'object' ) || ( typeof a === 'function' ) );\n}\n\nfunction dispatchObservers ( component, group, newState, oldState ) {\n\tfor ( var key in group ) {\n\t\tif ( !( key in newState ) ) continue;\n\n\t\tvar newValue = newState[ key ];\n\t\tvar oldValue = oldState[ key ];\n\n\t\tif ( differs( newValue, oldValue ) ) {\n\t\t\tvar callbacks = group[ key ];\n\t\t\tif ( !callbacks ) continue;\n\n\t\t\tfor ( var i = 0; i < callbacks.length; i += 1 ) {\n\t\t\t\tvar callback = callbacks[i];\n\t\t\t\tif ( callback.__calling ) continue;\n\n\t\t\t\tcallback.__calling = true;\n\t\t\t\tcallback.call( component, newValue, oldValue );\n\t\t\t\tcallback.__calling = false;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction get ( key ) {\n\treturn key ? this._state[ key ] : this._state;\n}\n\nfunction fire ( eventName, data ) {\n\tvar handlers = eventName in this._handlers && this._handlers[ eventName ].slice();\n\tif ( !handlers ) return;\n\n\tfor ( var i = 0; i < handlers.length; i += 1 ) {\n\t\thandlers[i].call( this, data );\n\t}\n}\n\nfunction observe ( key, callback, options ) {\n\tvar group = ( options && options.defer ) ? this._observers.post : this._observers.pre;\n\n\t( group[ key ] || ( group[ key ] = [] ) ).push( callback );\n\n\tif ( !options || options.init !== false ) {\n\t\tcallback.__calling = true;\n\t\tcallback.call( this, this._state[ key ] );\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function () {\n\t\t\tvar index = group[ key ].indexOf( callback );\n\t\t\tif ( ~index ) group[ key ].splice( index, 1 );\n\t\t}\n\t};\n}\n\nfunction observeDev ( key, callback, options ) {\n\tvar c = ( key = '' + key ).search( /[^\\w]/ );\n\tif ( c > -1 ) {\n\t\tvar message = \"The first argument to component.observe(...) must be the name of a top-level property\";\n\t\tif ( c > 0 ) message += \", i.e. '\" + key.slice( 0, c ) + \"' rather than '\" + key + \"'\";\n\n\t\tthrow new Error( message );\n\t}\n\n\treturn observe.call( this, key, callback, options );\n}\n\nfunction on ( eventName, handler ) {\n\tif ( eventName === 'teardown' ) return this.on( 'destroy', handler );\n\n\tvar handlers = this._handlers[ eventName ] || ( this._handlers[ eventName ] = [] );\n\thandlers.push( handler );\n\n\treturn {\n\t\tcancel: function () {\n\t\t\tvar index = handlers.indexOf( handler );\n\t\t\tif ( ~index ) handlers.splice( index, 1 );\n\t\t}\n\t};\n}\n\nfunction onDev ( eventName, handler ) {\n\tif ( eventName === 'teardown' ) {\n\t\tconsole.warn( \"Use component.on('destroy', ...) instead of component.on('teardown', ...) which has been deprecated and will be unsupported in Svelte 2\" );\n\t\treturn this.on( 'destroy', handler );\n\t}\n\n\treturn on.call( this, eventName, handler );\n}\n\nfunction set ( newState ) {\n\tthis._set( assign( {}, newState ) );\n\tthis._root._flush();\n}\n\nfunction _flush () {\n\tif ( !this._renderHooks ) return;\n\n\twhile ( this._renderHooks.length ) {\n\t\tthis._renderHooks.pop()();\n\t}\n}\n\nvar proto = {\n\tget: get,\n\tfire: fire,\n\tobserve: observe,\n\ton: on,\n\tset: set,\n\t_flush: _flush\n};\n\nvar protoDev = {\n\tget: get,\n\tfire: fire,\n\tobserve: observeDev,\n\ton: onDev,\n\tset: set,\n\t_flush: _flush\n};\n\nexport { differs, dispatchObservers, get, fire, observe, observeDev, on, onDev, set, _flush, proto, protoDev, appendNode, insertNode, detachNode, detachBetween, destroyEach, createElement, createSvgElement, createText, createComment, addEventListener, removeEventListener, setAttribute, setXlinkAttribute, getBindingGroupValue, linear, generateKeyframes, wrapTransition, transitionManager, noop, assign };\n","<div class=\"github-markdown-toc\" aria-disabled=\"{{ !isEnabled }}\" aria-busy=\"{{ isLoading }}\" data-open=\"{{ isOpen }}\">\n  <nav id=\"github-markdown-toc__nav-panel\" aria-hidden=\"{{ !isOpen }}\">\n    <ol>\n      {{#each headers as header}}\n      <li data-level=\"{{ header.level }}\"><a href=\"{{ header.link }}\">{{ header.text }}</a></li>\n      {{/each}}\n    </ol>\n  </nav>\n  <button type=\"button\" on:click=\"onBtnClicked()\" class=\"toggle-btn\" aria-controls=\"github-markdown-toc__nav-panel\" disabled=\"{{ !isEnabled }}\"></button>\n</div>\n<script>\n  export default {\n    methods: {\n      onBtnClicked () {\n        if (this.get('isEnabled')) {\n          this.fire('toggle-nav')\n        }\n      }\n    }\n  }\n</script>\n","/**\r\n * event emitter\r\n */\r\nexport default class EventEmitter {\r\n  constructor () {\r\n    /** @private */\r\n    this._handlers = new Map()\r\n  }\r\n  /**\r\n   * @param {string|Symbol} type\r\n   * @param {function} handler\r\n   */\r\n  on (type, handler) {\r\n    if (!this._handlers.has(type)) {\r\n      this._handlers.set(type, new Set())\r\n    }\r\n    this._handlers.get(type).add(handler)\r\n  }\r\n  /**\r\n   * @param {string|Symbol} type\r\n   * @param {function} handler\r\n   * @returns {boolean}\r\n   */\r\n  off (type, handler) {\r\n    if (!this._handlers.has(type)) {\r\n      return false\r\n    }\r\n    return this._handlers.get(type).delete(handler)\r\n  }\r\n  /**\r\n   * @param {string|Symbol} type\r\n   * @param {*} data\r\n   */\r\n  emit (type, data) {\r\n    if (this._handlers.has(type)) {\r\n      this._handlers.get(type).forEach(func => func(data))\r\n    }\r\n  }\r\n}\r\n","/**\n * @param {*} obj\n * @returns {boolean}\n */\nexport default function isPlainObject (obj) {\n  if (!obj) {\n    return false\n  }\n  const proto = Object.getPrototypeOf(obj)\n  return Object.prototype.toString.call(obj) === '[object Object]' && (proto === Object.getPrototypeOf({}) || proto === null)\n}\n","import isPlainObject from '../is-plain-object/index.js'\n\n/**\n * @param {object} obj\n * @returns {object}\n */\nfunction copyObject (obj) {\n  let copy = {}\n  Object.entries(obj).forEach(([k, v]) => {\n    if (isPlainObject(v)) {\n      copy[k] = copyObject(v)\n    }\n  })\n  return Object.assign({}, obj, copy)\n}\n\n/**\n * @param {*} target\n * @param {...*} sources\n * @returns {object}\n */\nexport default function deepAssign (target, ...sources) {\n  const copies = sources.map(source =>\n    isPlainObject(source) ? copyObject(source) : source\n  )\n  return Object.assign(target, ...copies)\n}\n","import EventEmitter from '../event-emitter/index.js'\nimport deepAssign from '../deep-assign/index.js'\nconst ON_CHANGE = Symbol('on-change')\n\nexport class Action {\n  /**\n   * @param {EventEmitter} dispatcher\n   */\n  constructor (dispatcher) {\n    /** @private */\n    this._dispatcher = dispatcher\n  }\n  /**\n   * Emit a event with data\n   * @param {Symbol} key - event name\n   * @param {*} data\n   */\n  dispatch (key, data) {\n    this._dispatcher.emit(key, data)\n  }\n}\n\nexport class Store extends EventEmitter {\n  /**\n   * @param {EventEmitter} dispatcher\n   */\n  constructor (dispatcher) {\n    super()\n    /** @private */\n    this._state = {}\n    /** @private */\n    this._dispatcher = dispatcher\n  }\n  /**\n   * @param {object} data\n   */\n  setState (data) {\n    this._state = deepAssign({}, this._state, data)\n    this.emit(ON_CHANGE)\n  }\n  /**\n   * @returns {object}\n   */\n  getState () {\n    return deepAssign({}, this._state)\n  }\n  /**\n   * @param {Symbol} key\n   * @param {function} func\n   */\n  register (key, func) {\n    this._dispatcher.on(key, func)\n  }\n  /**\n   * @param {function} func\n   */\n  onChange (func) {\n    this.on(ON_CHANGE, func)\n  }\n  /**\n   * @param {function} func\n   * @returns {boolean}\n   */\n  removeChangeListener (func) {\n    return this.off(ON_CHANGE, func)\n  }\n}\n\nexport const Dispatcher = EventEmitter\n","/**\n * @param {string|Symbol} property\n * @returns {function(object)}\n */\nexport function prop (property) {\n  return object => object[property]\n}\n\n/**\n * @param {function} fun\n * @returns {function(Array): Array}\n */\nexport function map (fun) {\n  return arr => arr.map(fun)\n}\n\n/**\n * @param {function: boolean} fun\n * @returns {function(Array): Array}\n */\nexport function filter (fun) {\n  return arr => arr.filter(fun)\n}\n\n/**\n * @param {function} f\n * @param {function} g\n * @returns {function(...args)}\n */\nfunction _pipe (f, g) {\n  return (...args) => g(f(...args))\n}\n\n/**\n * @param {...function} funs\n * @returns {function}\n */\nexport function pipe (...funs) {\n  return funs.reduce(_pipe)\n}\n\n/**\n * @param {function} fun\n * @returns {function(Array)}\n */\nexport function apply (fun) {\n  return arg => fun(...arg)\n}\n\n/**\n * @param {*} arg\n * @returns {function}\n */\nexport function always (arg) {\n  return () => arg\n}\n","import { prop, map, filter, pipe, apply, always } from '../modules/functional-util/index.js'\n\n/**\n * @typedef {object} HeaderObject\n * @property {string} link\n * @property {number} level\n * @property {string} text\n */\n\n/**\n * @typedef {HeaderObject[]} HeaderList\n */\n\n/**\n * @param {string} link\n * @param {number} level\n * @param {string} text\n * @returns {HeaderObject}\n */\nexport function createHeader (link, level, text) {\n  return {\n    link,\n    level,\n    text\n  }\n}\n\n/**\n * @param {string} query\n * @returns {function(Element): Node}\n */\nexport function querySelector (query) {\n  return root => root.querySelector(query)\n}\n\n/**\n * @param {string} query\n * @returns {function(Element): NodeList}\n */\nexport function querySelectorAll (query) {\n  return root => root.querySelectorAll(query)\n}\n\n/**\n * @param {string} query\n * @returns {function(Element): Element[]}\n */\nexport function querySelectorAllArray (query) {\n  return pipe(querySelectorAll(query), Array.from)\n}\n\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function hash (str) {\n  return `#${str}`\n}\n\n/**\n * @function\n * @param {Element}\n * @returns {string}\n */\nexport const id2link = pipe(prop('id'), hash)\n\n/**\n * @param {boolean} isHref\n * @returns {function(HTMLAnchorElement): string}\n */\nexport function hrefOrID (isHref) {\n  return isHref ? prop('hash') : id2link\n}\n\n/**\n * @param {string} str\n * @returns {string}\n */\nfunction trim (str) {\n  return str.trim()\n}\n\n/**\n * @function\n * @param {Node}\n * @returns {string}\n */\nexport const trimmedText = pipe(prop('textContent'), trim)\n\n/**\n * @function\n * @param {Node}\n * @returns {number}\n */\nexport const headerLevel = pipe(prop('tagName'), prop(1), Number)\n\n/**\n * @function\n * @param {Node}\n * @returns {boolean}\n */\nexport const hasText = pipe(prop('textContent'), Boolean)\n\n/**\n * @function\n * @param {Node[]}\n * @returns {Node[]}\n */\nexport const filterEmptyText = filter(hasText)\n\n/**\n * @param {...function} fun\n * @returns {function(Element): HeaderList}\n */\nexport function createHeaders (...fun) {\n  return pipe(filterEmptyText, ...fun, map(apply(createHeader)))\n}\n\n/**\n * @function\n * @param {Element}\n * @returns {HTMLHeadingElement[]}\n */\nexport const selectAllHeaderElement = querySelectorAllArray('h1, h2, h3, h4, h5, h6')\n\n/**\n * @param {string} query\n * @returns {function(Element): Element[]}\n */\nexport function selectAllHeaderElementFrom (query) {\n  return root => {\n    const element = root.querySelector(query)\n    if (!element) return []\n    return selectAllHeaderElement(element)\n  }\n}\n\n/**\n * @param {function(Element, ...*): string} link\n * @param {function(Element, ...*): number} level\n * @param {function(Element, ...*): string} text\n * @param {object} [options]\n * @returns {function(Element): (string|number)[]}\n */\nexport function element2Array (link, level, text, ...options) {\n  return element => [link, level, text].map(fun => fun(element, ...options))\n}\n\n/**\n * @param {number} level\n * @returns {function(Element): (string|number)[]}\n */\nexport function element2ArrayAnchorAndFlatLevel (level) {\n  return element2Array(\n    pipe(querySelector('a'), prop('href')),\n    always(level),\n    trimmedText\n  )\n}\n\n/**\n * @param {boolean} isJSEnabled\n * @returns {function(Element): (string|number)[]}\n */\nexport function markdownElement2Array (isJSEnabled) {\n  return element2Array(\n    pipe(querySelector('.anchor'), hrefOrID(isJSEnabled)),\n    headerLevel,\n    trimmedText\n  )\n}\n","export default class PageType {\n  /**\n   * @param {string} url\n   */\n  constructor (url) {\n    /** @public */\n    this.RELEASE = Symbol('release')\n    this.CODE = Symbol('code')\n    this.WIKI = Symbol('wiki')\n    this.UNKNOWN = Symbol('unknown')\n    const { pathname } = new URL(url)\n    // the first element is empty\n    const [, user, project, type, ...paths] = pathname.split('/')\n    if (type === 'releases' && paths.length === 0) {\n      this._type = this.RELEASE\n    } else if (type === 'blob' || type === 'tree' || (user && project && !type)) {\n      this._type = this.CODE\n    } else if (type === 'wiki') {\n      this._type = this.WIKI\n    } else {\n      this._type = this.UNKNOWN\n    }\n  }\n  /**\n   * @returns {Symbol}\n   */\n  getType () {\n    return this._type\n  }\n  /**\n   * @returns {boolean}\n   */\n  isReleasePage () {\n    return this._type === this.RELEASE\n  }\n  /**\n   * @returns {boolean}\n   */\n  isCodePage () {\n    return this._type === this.CODE\n  }\n  /**\n   * @returns {boolean}\n   */\n  isWikiPage () {\n    return this._type === this.WIKI\n  }\n  /**\n   * @returns {boolean}\n   */\n  isUnknownPage () {\n    return this._type === this.UNKNOWN\n  }\n}\n","/**\r\n * @returns {Promise<boolean, Error>}\r\n */\r\nexport default function checkJSEnebled () {\r\n  return new Promise(resolve => {\r\n    chrome.runtime.sendMessage({\r\n      type: 'is-js-enabled'\r\n    }, resolve)\r\n  })\r\n}\r\n","import { map } from '../modules/functional-util/index.js'\nimport { createHeaders, querySelectorAllArray, selectAllHeaderElementFrom, element2ArrayAnchorAndFlatLevel, markdownElement2Array } from './functions.js'\nimport PageType from './page-type.js'\nimport checkJSEnabled from './check-js-enabled.js'\n\n/**\n * @abstract\n */\nexport default class PageFactory {\n  /**\n   * @param {string} url\n   */\n  static createFromUrl (url) {\n    const pagetype = new PageType(url)\n    if (pagetype.isReleasePage()) return new ReleasePage()\n    if (pagetype.isCodePage()) return new CodePage()\n    if (pagetype.isWikiPage()) return new WikiPage()\n    return new UnknownPage()\n  }\n}\n\n/**\n * @abstract\n */\nexport class GitHubPage {\n  /**\n   * @returns {Promise<HeaderList>}\n   */\n  async getHeaderList () {\n    return createHeaders(await this.elementsToArray())(this.getHeaders(document))\n  }\n  /**\n   * @private\n   * @returns Array\n   */\n  getHeaders () {\n    return []\n  }\n  /**\n   * @private\n   * @returns {Promise<function: Array, Error>}\n   */\n  async elementsToArray () {\n    return () => []\n  }\n}\n\nexport class ReleasePage extends GitHubPage {\n  /**\n   * @private\n   * @returns {Element[]}\n   */\n  getHeaders (root) {\n    return querySelectorAllArray('.release-title')(root)\n  }\n  /**\n   * @private\n   * @returns {Promise<function(Element[]): Array, Error>}\n   */\n  async elementsToArray () {\n    return map(element2ArrayAnchorAndFlatLevel(1))\n  }\n}\n\nexport class CodePage extends GitHubPage {\n  /**\n   * @private\n   * @returns {Element[]}\n   */\n  getHeaders (root) {\n    return selectAllHeaderElementFrom('.markdown-body')(root)\n  }\n  /**\n   * @private\n   * @returns {Promise<function(Element[]): Array, Error>}\n   */\n  async elementsToArray () {\n    const isJSEnabled = await checkJSEnabled()\n    return map(markdownElement2Array(isJSEnabled))\n  }\n}\n\nexport class WikiPage extends GitHubPage {\n  /**\n   * @private\n   * @returns {Element[]}\n   */\n  getHeaders (root) {\n    return selectAllHeaderElementFrom('.wiki-body .markdown-body')(root)\n  }\n  /**\n   * @private\n   * @returns {Promise<function(Element[]): Array, Error>}\n   */\n  async elementsToArray () {\n    const isJSEnabled = await checkJSEnabled()\n    return map(markdownElement2Array(isJSEnabled))\n  }\n}\n\nexport class UnknownPage extends GitHubPage {\n}\n","import { Action } from '../modules/flux/index.js'\nimport pageFactory from './page.js'\n\nexport const key = {\n  START_LOADING: Symbol('start-loading'),\n  MOVE_TO_PAGE: Symbol('move-to-page'),\n  TOGGLE_NAV: Symbol('toggle-nav')\n}\n\nexport default class AppAction extends Action {\n  startLoading () {\n    this.dispatch(key.START_LOADING)\n  }\n  async moveToPage () {\n    const page = pageFactory.createFromUrl(location.href)\n    const headers = await page.getHeaderList()\n    const isAvailable = Boolean(headers.length)\n    const data = {\n      headers,\n      isAvailable\n    }\n    this.dispatch(key.MOVE_TO_PAGE, data)\n  }\n  toggleNav () {\n    this.dispatch(key.TOGGLE_NAV)\n  }\n}\n","import { Store } from '../modules/flux/index.js'\nimport { key } from './action.js'\n\nexport default class AppStore extends Store {\n  constructor (dispatcher) {\n    super(dispatcher)\n    this.setState({\n      isLoading: false,\n      isOpen: false,\n      isEnabled: false,\n      headers: []\n    })\n    this.register(key.START_LOADING, this.loading.bind(this))\n    this.register(key.MOVE_TO_PAGE, this.toPage.bind(this))\n    this.register(key.TOGGLE_NAV, this.toggleNav.bind(this))\n  }\n  loading () {\n    this.setState({\n      isLoading: true\n    })\n  }\n  toPage ({ isAvailable, headers }) {\n    this.setState({\n      headers,\n      isLoading: false,\n      isEnabled: isAvailable,\n      isOpen: isAvailable ? this.getState().isOpen : false\n    })\n  }\n  toggleNav () {\n    this.setState({\n      isOpen: !this.getState().isOpen\n    })\n  }\n}\n","'use strict'\n\nimport App from './app.html'\nimport { Dispatcher } from '../modules/flux/index.js'\nimport AppAction from './action.js'\nimport AppStore from './store.js'\n\nconst dispatcher = new Dispatcher()\nconst action = new AppAction(dispatcher)\nconst store = new AppStore(dispatcher)\n\nconst dataAttr = 'githubMarkdownTocOpen'\nconst body = document.body\n\nconst rootElm = document.createElement('github-markdown-toc-container')\nconst app = new App({\n  data: store.getState(),\n  target: rootElm\n})\nbody.appendChild(rootElm)\nstore.onChange(() => {\n  app.set(store.getState())\n})\nstore.onChange(() => {\n  const { isOpen } = store.getState()\n  if (isOpen) {\n    body.dataset[dataAttr] = ''\n  } else {\n    delete body.dataset[dataAttr]\n  }\n})\napp.on('toggle-nav', action.toggleNav.bind(action))\nwindow.addEventListener('pjax:start', action.startLoading.bind(action))\nwindow.addEventListener('pjax:end', action.moveToPage.bind(action))\n// init\naction.moveToPage()\n"],"names":["assign","target","i","source","k","appendNode","node","insertNode","anchor","detachNode","destroyEach","iterations","detach","start","createElement","name","createText","data","addEventListener","event","handler","removeEventListener","setAttribute","attribute","value","differs","a","b","dispatchObservers","component","group","newState","oldState","key","newValue","oldValue","callbacks","callback","get","fire","eventName","handlers","observe","options","index","on","set","_flush","proto","header","EventEmitter","type","func","isPlainObject","obj","copyObject","copy","v","deepAssign","sources","copies","ON_CHANGE","Action","dispatcher","Store","Dispatcher","prop","property","object","map","fun","arr","filter","_pipe","f","g","args","pipe","funs","apply","arg","always","createHeader","link","level","text","querySelector","query","root","querySelectorAll","querySelectorAllArray","hash","str","id2link","hrefOrID","isHref","trim","trimmedText","headerLevel","hasText","filterEmptyText","createHeaders","selectAllHeaderElement","selectAllHeaderElementFrom","element","element2Array","element2ArrayAnchorAndFlatLevel","markdownElement2Array","isJSEnabled","PageType","url","pathname","user","project","paths","checkJSEnebled","resolve","PageFactory","pagetype","ReleasePage","CodePage","WikiPage","UnknownPage","GitHubPage","checkJSEnabled","AppAction","page","pageFactory","headers","isAvailable","AppStore","action","store","dataAttr","body","rootElm","app","App","isOpen"],"mappings":"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"}